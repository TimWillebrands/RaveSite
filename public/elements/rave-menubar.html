<link rel="import" href="/bower/polymer/polymer.html">
<link href="/public/css/menubar.css" rel="stylesheet">

<polymer-element name="rave-menubar" apply-author-styles>
    <template>
        <div class="container">
            <ul id="nav">
                <content></content>
            </ul>
        </div>
        <link href="/public/css/menubar.css" rel="stylesheet">
    </template>
    <content id="content" select="li"></content>
    <script>
        /*global Polymer lib*/
        Polymer('rave-menubar', {
            imagesrc: 'https://lorempixel.com/g/1920/1080',
            heightcompensation: 0,
            height: 0,
            domReady: function() {
                var menubar = this.$.nav;
                var everythingExceptMenubar = $("#everythingExceptMenubar").get(0);
                var phoneMenu = $("#phoneMenu").get(0);
                console.log(phoneMenu);
                console.log($(menubar));
                $(".normalSize",this).appendTo(menubar);
                $(".phoneSize",this).appendTo(menubar);
                
                window.menubarHeight = lib.getAbsoluteHeight(menubar);
                everythingExceptMenubar.setAttribute("style",
                        "height: 500px;height: -webkit-calc(100% - " + window.menubarHeight +"px);"+
                        "height: -moz-calc(100% - " + window.menubarHeight +"px);"+
                        "height: calc(100% - " + window.menubarHeight +"px);");
                lib.addEvent(window, "resize", function(){
                    window.menubarHeight = lib.getAbsoluteHeight(menubar);
                    everythingExceptMenubar.setAttribute("style",
                            "height: 500px;height: -webkit-calc(100% - " + window.menubarHeight +"px);"+
                            "height: -moz-calc(100% - " + window.menubarHeight +"px);"+
                            "height: calc(100% - " + window.menubarHeight +"px);");
                });
            }
        });
    </script>
</polymer-element>